
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Map Portal</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center">
  <div class="bg-white shadow-xl rounded-xl p-6 max-w-4xl w-full mx-4">
    <div class="text-center mb-6">
      <img src="images/town logo.jpg" alt="Town of Newtown Connecticut Logo" class="mx-auto h-20 mb-3" onerror="this.src='https://via.placeholder.com/512'; this.alt='Error'">
      <h1 class="text-2xl font-bold text-gray-800">Newtown Map Portal</h1>
      <p class="text-gray-600 text-sm mt-1">Access the available GIS web applications:</p>
    </div>
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
      <a href="https://workorder.mapxpress.net/newtown/" target="_blank" class="border border-gray-600 rounded-lg p-4 hover:bg-blue-50 transition">
        <h2 class="text-lg font-semibold text-blue-700">Public Works Service Request</h2>
        <p class="text-gray-600 text-sm">Submit and monitor public works service requests for Newtown, CT. Requests are processed immediately.</p>
      </a>
      <a href="https://westcogct.mapgeo.io/datasets/properties?abuttersDistance=100&latlng=41.298093%2C-73.503768" target="_blank" id="gis-town-maps" class="border border-gray-600 rounded-lg p-4 hover:bg-blue-50 transition">
        <h2 class="text-lg font-semibold text-blue-700">New GIS Town Maps</h2>
        <p class="text-gray-600 text-sm">Explore cadastral information and address points in Newtownâ€™s Interactive GIS.</p>
        <p id="gis-town-maps-counter" class="text-sm text-gray-600 mt-2 hidden">Accesses: <span id="gis-town-maps-count">0</span></p>
      </a>
      <div onclick="toggleSection('map-gallery')" class="border border-gray-600 rounded-lg p-4 hover:bg-blue-50 transition cursor-pointer">
        <h2 class="text-lg font-semibold text-blue-700">Town Map Gallery</h2>
        <p class="text-gray-600 text-sm">Download PDF maps of Newtown, CT. While every reasonable effort has been made to ensure the accuracy, correctness, and timeliness of the maps presented, The Town of Newtown assumes no responsibility for errors or omissions.</p>
      </div>
      <div onclick="toggleSection('download-others')" id="download-others-box" class="border border-gray-600 rounded-lg p-4 hover:bg-blue-50 transition cursor-pointer">
        <h2 class="text-lg font-semibold text-blue-700">Download Others GIS Sources</h2>
        <p class="text-gray-600 text-sm">Access external GIS data resources.</p>
        <p id="download-others-counter" class="text-sm text-gray-600 mt-2 hidden">Accesses: <span id="download-others-count">0</span></p>
      </div>
      <div onclick="toggleSection('staff-contact')" class="border border-gray-600 rounded-lg p-4 hover:bg-blue-50 transition cursor-pointer">
        <h2 class="text-lg font-semibold text-blue-700">Staff Contact</h2>
        <p class="text-gray-600 text-sm">Contact us here.</p>
      </div>
      <a href="https://newtown.mapxpress.net/" target="_blank" id="legacy-gis-website" class="border border-gray-600 rounded-lg p-4 hover:bg-blue-50 transition">
        <h2 class="text-lg font-semibold text-blue-700">Legacy GIS Website</h2>
        <p class="text-gray-600 text-sm">Access the old interface here, which will be available until August 31, 2025.</p>
        <p id="legacy-gis-counter" class="text-sm text-gray-600 mt-2 hidden">Accesses: <span id="legacy-gis-count">0</span></p>
      </a>
    </div>
    <div id="download-others" class="hidden mt-4">
      <div class="grid grid-cols-1 gap-4">
        <a href="https://magic.lib.uconn.edu/" target="_blank" class="border border-gray-600 rounded-lg p-4 hover:bg-blue-50 transition">
          <h3 class="text-lg font-semibold text-blue-700">UCONN Map and Geographic Information Center</h3>
          <p class="text-gray-600 text-sm">Available data: Aerial Photography, Education & Outreach, Maps and Mash-ups, GIS data...</p>
        </a>
        <a href="https://clear.uconn.edu/" target="_blank" class="border border-gray-600 rounded-lg p-4 hover:bg-blue-50 transition">
          <h3 class="text-lg font-semibold text-blue-700">Center for Land Use Education & Research</h3>
          <p class="text-gray-600 text-sm">Available data: Aerial Photography, LIDAR, Watershed Maps, Land Cover, Riparian Corridors...</p>
        </a>
        <a href="https://portal.ct.gov/" target="_blank" class="border border-gray-600 rounded-lg p-4 hover:bg-blue-50 transition">
          <h3 class="text-lg font-semibold text-blue-700">CT Department of Environmental Protection</h3>
          <p class="text-gray-600 text-sm">Available data: Aerial Photography, Geology, Maps, Elevation Data, Bathymetry...</p>
        </a>
      </div>
    </div>
    <div id="map-gallery" class="hidden mt-4">
      <div class="grid grid-cols-1 gap-4">
        <div class="border border-gray-600 rounded-lg p-4">
          <div class="flex items-center justify-between">
            <div>
              <h3 class="text-lg font-semibold text-blue-700">Open Space Map</h3>
              <p class="text-gray-600 text-sm">The Open Space Map was prepared by GIS Dept. Date Revised: February 28, 2011</p>
            </div>
            <div>
              <a href="maps/Newtown_Open_Space.pdf" download class="flex items-center text-blue-600 hover:text-blue-800">
                <img src="https://cdn-icons-png.flaticon.com/512/337/337946.png" alt="PDF Icon" class="h-6 w-6 mr-1">
                <span class="text-sm">Download (1.2 MB)</span>
              </a>
            </div>
          </div>
        </div>
        <div class="border border-gray-600 rounded-lg p-4">
          <div class="flex items-center justify-between">
            <div>
              <h3 class="text-lg font-semibold text-blue-700">Street Index Map</h3>
              <p class="text-gray-600 text-sm">The Street Index Map was prepared by GIS Dept. Date Revised: April 28 2011</p>
            </div>
            <div>
              <a href="maps/Newtown_Street_Index.pdf" download class="flex items-center text-blue-600 hover:text-blue-800">
                <img src="https://cdn-icons-png.flaticon.com/512/337/337946.png" alt="PDF Icon" class="h-6 w-6 mr-1">
                <span class="text-sm">Download (1.5 MB)</span>
              </a>
            </div>
          </div>
        </div>
        <div class="border border-gray-600 rounded-lg p-4">
          <div class="flex items-center justify-between">
            <div>
              <h3 class="text-lg font-semibold text-blue-700">Zip Codes Map</h3>
              <p class="text-gray-600 text-sm">The Zip Code Map was prepared by GIS Dept. Date Revised: May 26, 2011</p>
            </div>
            <div>
              <a href="maps/Newtown_Zip_Codes.pdf" download class="flex items-center text-blue-600 hover:text-blue-800">
                <img src="https://cdn-icons-png.flaticon.com/512/337/337946.png" alt="PDF Icon" class="h-6 w-6 mr-1">
                <span class="text-sm">Download (1.0 MB)</span>
              </a>
            </div>
          </div>
        </div>
        <div class="border border-gray-600 rounded-lg p-4">
          <div class="flex items-center justify-between">
            <div>
              <h3 class="text-lg font-semibold text-blue-700">Zoning Map</h3>
              <p class="text-gray-600 text-sm">The Zoning Map was prepared by GIS Dept. Date Revised: April 14, 2011</p>
            </div>
            <div>
              <a href="maps/Newtown_Zoning.pdf" download class="flex items-center text-blue-600 hover:text-blue-800">
                <img src="https://cdn-icons-png.flaticon.com/512/337/337946.png" alt="PDF Icon" class="h-6 w-6 mr-1">
                <span class="text-sm">Download (1.3 MB)</span>
              </a>
            </div>
          </div>
        </div>
      </div>
      <div class="border border-gray-600 rounded-lg p-4">
  <div class="flex items-center justify-between">
    <div>
      <h3 class="text-lg font-semibold text-blue-700">Verbal Consent Script (Emergency)</h3>
      <p class="text-gray-600 text-sm">Prepared by GIS Dept. Date Revised: September 2025</p>
    </div>
    <div>
      <a href="maps/Town_of_Newtown_Verbal_Consent_Script_Emergency_2.pdf" download class="flex items-center text-blue-600 hover:text-blue-800">
        <img src="https://cdn-icons-png.flaticon.com/512/337/337946.png" alt="PDF Icon" class="h-6 w-6 mr-1">
        <span class="text-sm">Download</span>
      </a>
    </div>
  </div>
    </div>
    <div id="staff-contact" class="hidden mt-4">
      <div class="grid grid-cols-1 gap-4">
        <div class="border border-gray-600 rounded-lg p-4">
          <h3 class="text-lg font-semibold text-blue-700">Technology and GIS Dept.</h3>
          <p class="text-gray-600 text-sm">3 Primrose Street</p>
          <p class="text-gray-600 text-sm">Newtown, CT 06470</p>
          <p class="text-gray-600 text-sm">Phone: (203) 270-4270</p>
          <p class="text-gray-600 text-sm">Email: <a href="mailto:technology.gis@newtown-ct.gov" class="text-blue-600 hover:text-blue-800">technology.gis@newtown-ct.gov</a></p>
        </div>
        <div class="border border-gray-600 rounded-lg p-4">
          <h3 class="text-lg font-semibold text-blue-700">Assessor's Office</h3>
          <p class="text-gray-600 text-sm">Sarah Carey</p>
          <p class="text-gray-600 text-sm">Phone: (203) 270-4240</p>
          <p class="text-gray-600 text-sm">Email: <a href="mailto:sarah.carey@newtown-ct.gov" class="text-blue-600 hover:text-blue-800">sarah.carey@newtown-ct.gov</a></p>
        </div>
      </div>
    </div>
  </div>
  <script>
    let currentSection = null;

    // Initialize counters from localStorage or set to 0
    let gisTownMapsCount = parseInt(localStorage.getItem('gisTownMapsCount')) || 0;
    let downloadOthersCount = parseInt(localStorage.getItem('downloadOthersCount')) || 0;
    let legacyGisCount = parseInt(localStorage.getItem('legacyGisCount')) || 0;

    // Update counter displays
    document.getElementById('gis-town-maps-count').textContent = gisTownMapsCount;
    document.getElementById('download-others-count').textContent = downloadOthersCount;
    document.getElementById('legacy-gis-count').textContent = legacyGisCount;

    // Show counters if they've been accessed before
    if (gisTownMapsCount > 0) {
      document.getElementById('gis-town-maps-counter').classList.remove('hidden');
    }
    if (downloadOthersCount > 0) {
      document.getElementById('download-others-counter').classList.remove('hidden');
    }
    if (legacyGisCount > 0) {
      document.getElementById('legacy-gis-counter').classList.remove('hidden');
    }

    // Counter for GIS Town Maps (direct link)
    document.getElementById('gis-town-maps').addEventListener('click', () => {
      gisTownMapsCount++;
      localStorage.setItem('gisTownMapsCount', gisTownMapsCount);
      document.getElementById('gis-town-maps-count').textContent = gisTownMapsCount;
      document.getElementById('gis-town-maps-counter').classList.remove('hidden');
    });

    // Counter for Download Others GIS Sources (toggle section)
    document.getElementById('download-others-box').addEventListener('click', () => {
      if (currentSection !== 'download-others') {
        downloadOthersCount++;
        localStorage.setItem('downloadOthersCount', downloadOthersCount);
        document.getElementById('download-others-count').textContent = downloadOthersCount;
        document.getElementById('download-others-counter').classList.remove('hidden');
      }
    });

    // Counter for Legacy GIS Website (direct link)
    document.getElementById('legacy-gis-website').addEventListener('click', () => {
      legacyGisCount++;
      localStorage.setItem('legacyGisCount', legacyGisCount);
      document.getElementById('legacy-gis-count').textContent = legacyGisCount;
      document.getElementById('legacy-gis-counter').classList.remove('hidden');
    });

    function toggleSection(sectionId) {
      const sections = ['download-others', 'map-gallery', 'staff-contact'];
      const targetSection = document.getElementById(sectionId);

      if (!targetSection) return;

      // If the clicked section is already open, close it
      if (currentSection === sectionId) {
        targetSection.classList.add('hidden');
        currentSection = null;
        return;
      }

      // Close all sections
      sections.forEach(id => {
        const section = document.getElementById(id);
        if (section) section.classList.add('hidden');
      });

      // Open the clicked section
      targetSection.classList.remove('hidden');
      currentSection = sectionId;
    }
  </script>
</body>
</html>
